# meta-ros2
ROS 2 Layer for OpenEmbedded Linux

## Create a docker container

First a docker container is needed. Use https://github.com/erlerobot/Dockerfiles/tree/master/OpenEmbedded/docker_ros2 or check getting Docker container

```
git clone https://github.com/erlerobot/Dockerfiles/
cd Dockerfiles/OpenEmbedded/docker_ros2/
docker build .
docker run -it -v ${PWD}/shared:/home/build/shared ea2400e95d98 #change the id with the generated by docker build

```

After that you will be inside the docker container

```
build@a1eaaf9dd67f:~$ git clone https://github.com/erlerobot/meta-ros2
build@a1eaaf9dd67f:~$ cd poky/
build@a1eaaf9dd67f:~$ source oe-init-build-env

```
## Get Docker 
You can use the base Docker image from docker.erlerobotics.com

```
docker pull docker.erlerobotics.com/meta-ros2:latest
docker run -it -v ${PWD}/shared:/home/build/shared docker.erlerobotics.com/meta-ros2:latest
# inside docker
build@a1eaaf9dd67f:~$ cd poky/
build@a1eaaf9dd67f:~$ source oe-init-build-env
```


## Builds

The build can be perform using the next command inside the `~/poky/build` folder: 

```
bitbake core-image-ros2
```

## Add recipes

`recipetool` command can be used to generate layer files, these layers needs to be generated inside the `~/poky/build` folder. After should be moved to the meta package.
For example:

```
recipetool -d create -o Fast-RTPS_1.4.0.bb https://github.com/eProsima/Fast-RTPS/archive/v1.4.0.tar.gz
```

## Recomendations

 - Use the server, is faster.
 - Before exiting your container make a commit. If not, you will need to recompile all your job.

```
docker commit hopeful_kare zynqberry-ros2-base1
```

